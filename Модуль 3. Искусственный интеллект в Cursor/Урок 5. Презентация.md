[[Урок 5. Архитектурные советы и анализ проекта]]
## **Слайд 1 — Титульный


**Заголовок:** Архитектурные советы и анализ проекта с AI

**Подзаголовок:** Структура · Зависимости · Паттерны · Эволюция

**Тезисы:** AI помогает «увидеть лес за деревьями» и предложить путь улучшений

**Notes (3:00):** зафиксируйте цель: научиться получать от AI обзор архитектуры, выявлять риски и формировать план эволюции (не «переписать всё»).

---

## **Слайд 2 — План и ожидаемый результат**

**Тезисы:**

1. Сбор контекста и карта проекта
    
2. Анализ зависимости/границ модулей
    
3. Архсоветы: упрощение, производительность, масштабирование
    
4. Сравнение целевых подходов (MVC/MVVM/монолит/микросервисы/модулярный монолит)
    
    **Notes (0:45):** критерий успеха — черновик карты модулей + ADR-заметка + список next steps.

---

## **Слайд 3 — Что потребует AI для качественного анализа**

**Тезисы:**

- Размер и стек, режим деплоя, нагрузка/SLA
    
- Бизнес-домены и «горячие точки»
    
- Границы команд/владельцев (ownership)
    
    **Notes (1:15):** объясните: чем точнее контекст — тем полезнее советы.


**Промпт (шаблон):**

«Контекст: {язык/фреймворк}, деплой {k8s/VPS}, нагрузка {RPS}, SLA {99.9%}. Цель: обзор архитектуры и рисков. Работай в src/, игнорируй node_modules/сборки. Формат: карта слоёв, список модулей, риски, рекомендации.»

---

## **Слайд 4 — Карта проекта: как просить у AI

**Тезисы:**

- Просим **дерево модулей** и **таблицу зависимостей**
    
- Фильтры: только публичные API/экспорт
    
- Обязателен формат: таблица/список + краткие описания
    
    **Notes (2:00):** покажите, как ограничить область (src/**, исключить тесты).


**Промпт:**

«Построй карту проекта: слои (UI/Domain/Data), список модулей и их назначения. Дай таблицу зависимостей (из → в), отметь циклы и “god-модули”. Не анализируй **/*.test.* и dist/.»

---

## **Слайд 5 — Выявляем проблемные зоны

**Тезисы:**

- Циклические зависимости
    
- Утечки слоёв (UI → Data минуя Domain)
    
- Чрезмерная связанность, дубли логики
    
    **Notes (2:00):** попросите AI дать «рейтинг риска» 1–5 и краткие примеры строк/файлов.

**Промпт:**

«Найди: циклы, запрещённые направления (UI→Data), большие “god-модули” (>1000 строк/экспортов). Дай рейтинг риска и ссылки на файлы/строки.»

---

## **Слайд 6 — Визуализация (текст/псевдографика)**

**Тезисы:**

- Просим граф в виде ASCII/mermaid (если удобнее)
    
- Хватает для обсуждения в PR/митинге
    
    **Notes (1:00):** визуал ≠ истина, но ускоряет диалог.

**Промпт (mermaid):**

«Сгенерируй mermaid диаграмму модулей (на уровне папок) и направлений зависимостей. Отметь проблемные рёбра красным (комментарием).»

---

## **Слайд 7 — Архитектурные границы и слои

**Тезисы:**

- Предложить целевую стратификацию: **Domain / Application / Interface / Infrastructure**
    
- Правила импорта: вверх нельзя, вниз можно
    
    **Notes (3:00):** попросите AI сгенерировать «контракт слоёв» и примеры нарушений.

**Промпт:**

«Предложи слои (Domain/Application/Interface/Infra) с правилами импорта. Дай примеры текущих нарушений и как их исправить (патчи-diff).»

---

## **Слайд 8 — Советы по оптимизации

**Тезисы:**

- Сокращение связности, кэширование, CQRS там, где уместно
    
- Тепловая карта зависимостей (часто импортируемые/медленные)
    
- Источники правды: конфиг/схемы/DTO
    
    **Notes (3:00):** просите конкретные изменения с оценкой влияния.

**Промпт:**

«Предложи 5–7 архитектурных улучшений с оценкой пользы/сложности (L/M/XL) и рисков. Для каждого — шаги внедрения и критерии отката.»

---

## **Слайд 9 — Производительность и масштабирование

**Тезисы:**

- “Горячие пути” (профилирование), кеши, батчинг, очереди
    
- Идемпотентность, ретраи, дедупликация
    
    **Notes (3:00):** просите ориентироваться на нагрузку/SLA.

**Промпт:**

«Для операций {A,B,C} предложи архитектурные варианты повышения throughput/latency (кеш/очередь/батчинг). Дай схемы взаимодействий (текст/mermaid) и компромиссы.»

---

## **Слайд 10 — Сравнение подходов

**Тезисы:**

- Критерии выбора: команда, операционные косты, требования к данным
    
- Сравнение: **MVC / MVVM / монолит / микросервисы / модульный монолит / event-driven**
    
    **Notes (2:00):** просите матрицу «когда подходит/не подходит».

**Промпт:**

«Сравни целевые архитектуры для нашего контекста. Дай таблицу: вариант, плюсы/минусы, риски, когда выбирать, миграционный путь.»

---

## **Слайд 11 — Сравнение подходов

**Тезисы:**

- Предложение целевого варианта + аргументация
    
- План внедрения по этапам
    
    **Notes (2:00):** фиксируйте решение в ADR.

---

## **Слайд 12 — Микро-демо

  

**Задача:** получить карту проекта → выявить цикл → предложить фиксы → ADR

**Шаги:**

1. **Cmd/Ctrl+K** в корне: промпт на карту/зависимости (Слайд 4).
    
2. Получить список циклов и утечек слоёв (Слайд 5).
    
3. Промпт на правила слоёв и патчи-diff (Слайд 7).
    
4. Сформировать ADR-черновик (Слайд 12).
    
    **Notes:** держите небольшой демонстрационный репозиторий/ветку.

---

## **Слайд 13 — Практика

**Задание:**

- Попросите AI построить карту модулей вашего проекта
    
- Найдите 1 цикл или утечку слоя и предложите фикс (diff)
    
- Создайте ADR-черновик на 1 страницу
    
    **Критерии:** есть карта, найденный риск, конкретный фикс и ADR.
    

---

## **Слайд 14 — Анти-паттерны и как их избежать**

**Тезисы:**

- «Переписать всё с нуля» вместо эволюции
    
- Без правил — архитектура быстро «расползается»
    
- Советы AI без метрик/границ — шум
    
    **Notes (2:00):** всегда: контекст → карта → маленькие шаги → гвардрайлы → метрики.

---

## **Слайд 15 — Подсказки промптов

- «Построй дерево модулей и таблицу зависимостей (из→в), пометь циклы и god-модули. Формат: markdown-таблица + список проблем.»
    
- «Предложи слои (Domain/Application/Interface/Infra) с правилами импортов и примерами нарушений. Верни патчи-diff для исправлений.»
    
- «Сделай дорожную карту упрощения архитектуры на 8–12 недель: этапы, метрики, риски, критерии отката.»
    
- «Сравни монолит/модульный монолит/микросервисы для нашего контекста. Таблица + рекомендация + план миграции.»
    
- «Сгенерируй ADR (1 стр.): контекст, решение, последствия, план внедрения.

---

## **Слайд 16 — Итоги

**Тезисы:**

- AI помогает увидеть структуру, риски и путь эволюции
    
- Решения фиксируем в ADR, изменения защищаем гвардрайлами