[[Урок 3. AI для анализа больших кодовых баз]]
## **Слайд 1 — Титульный

**Заголовок:** AI как «рентген» кода

**Подзаголовок:** Карта зависимостей · Пояснение legacy · Поиск узких мест

**Notes:** цель — научиться быстро понимать незнакомый/legacy-проект и находить точки оптимизации с помощью AI.

---

## **Слайд 2 — План и результат**

**Тезисы:**

1. Построим карту модулей и их связей
    
2. Научимся объяснять сложные участки кода «по-человечески»
    
3. Выявим «бутылочные горлышки» и дадим план улучшений
    
    **Итог:** мермайд-диаграмма зависимостей, «паспорт» модулей, отчёт по оптимизации с приоритетами.

---

### **БЛОК 1. КАРТА ЗАВИСИМОСТЕЙ

## **Слайд 3 — С чего начать аудит кода**

**Тезисы:**

- Снимите «срез» проекта: структура папок, точки входа, сборщик, тесты
    
- Определите домены: auth, billing, ui, core, api
    
    **Notes:** цель — быстро получить **карту и глоссарий** (словарь терминов).

**Промпт (старт):**

«Суммаризируй проект по открытым файлам: перечисли домены/фичи, точки входа, общие утилиты. Дай 5–8 буллетов-выводов и список “неясных мест” для уточнения.»

---

## **Слайд 4 — Построение карты (frontend)**

**Тезисы:**

- Просим AI построить **граф импортов** и сгруппировать по фичам
    
- Получаем **mermaid** для быстрой визуализации
    
    **Промпт:**
    
    «Построй **mermaid flowchart** зависимостей для фронтенда: узлы — папки app/, features/*, shared/*. Рёбра — импорты. Покажи только верхний уровень (без файлов).»

---

## **Слайд 6 — «Паспорт» модуля**

**Тезисы:**

- Короткая карточка: назначение, публичный API, зависимости, риски
    
    **Промпт:**
    
    «Сделай “паспорт модуля” для features/tasks:
    
    назначение, публичные функции/компоненты, вход/выход данных, зависимости, риски (3 шт.), TODO на 1–2 недели.»

---

## **Слайд 7 — Арх-гвардрайлы (правила)**

**Тезисы:**

- Стабильные границы, запрет циклических импортов
    
- “От UI к Domain — через Application”, «никаких прямых DB в UI/Domain»
    
    **Промпт:**
    
    «Сформулируй 6 правил импортов для текущего проекта (гвардрайлы) и список мест, где они нарушены. Дай приоритет (High/Med/Low).»

---

### **БЛОК 2. ОБЪЯСНЕНИЕ LEGACY-КОДА

## **Слайд 8 — Разбор «длинной» функции**

**Тезисы:**

- Просим AI: краткий пересказ, инварианты, предположения, крайние случаи
    
- Результат — список шагов + диаграмма потоков данных
    
    **Промпт:**
    
    «Объясни функцию calculateInvoice простым языком для мидла.
    
    Дай: 1) поэтапный разбор, 2) инварианты, 3) крайние случаи, 4) список из 3 тестов, 5) возможные побочные эффекты.»

---

## **Слайд 9 — Упрощение и рефакторинг без смены API**

**Тезисы:**

- Требуем **diff** с мелкими шагами и комментариями
    
    **Промпт:**
    
    «Перепиши calculateInvoice без изменения публичной сигнатуры: меньше ветвлений, чистые функции, без побочных эффектов. Верни **unified diff** + пояснения (1–2 предложения на хунк).»
    

---

## **Слайд 10 — Объяснение алгоритмов «на пальцах»**

**Тезисы:**

- Полезно для онбординга и ревью
    
- Просим аналогии/визуализации
    
    **Промпт:**
    
    «Объясни алгоритм дедупликации заказов простыми шагами + **mermaid sequence** диаграммой взаимодействий. Добавь 2 анти-примера, когда он ломается.»

---

### **БЛОК 3. ПОИСК «УЗКИХ МЕСТ»

## **Слайд 11 — Типы «бутылочных горлышек»**

**Тезисы:**

- N+1 (БД/HTTP), тяжелые синхронные участки, лишние ререндеры, сериализация, парсинг больших JSON
    
    **Notes:** сначала ищем **подозрительные паттерны**, потом — подтверждаем профилированием.

**Промпт:**

«Просканируй модуль tasks на паттерны N+1 и лишние запросы/перерендеры. Верни список подозрительных мест с файлами/строками и гипотезами оптимизации.»

---

## **Слайд 12 — Отчёт по оптимизации (скелет)**

**Тезисы:**

- Для каждого пункта: **проблема → эффект → фикс → риск → gain**
    
    **Промпт:**
    
    «Собери отчёт “Оптимизация”: таблица с колонками: Место, Проблема, Предложение, Ожидаемый эффект, Риск/Сложность (S/M/L), Приоритет.»

**Пример строки:**

features/tasks/List.tsx | лишние ререндеры при фильтрации | мемоизация select + normalize deps | -20% CPU | Low | High

---

## **Слайд 13 — Проверка допущений тестами/бенчами**

**Тезисы:**

- Пишем микро-тесты/бенчмарки до фикса
    
    **Промпт:**
    
    «Сгенерируй бенчмарки для sortTasks (10^3, 10^4 элементов) и тесты на стабильность сортировки. Не меняй прод-код; файлы сложи в tests/bench/ и tests/unit/.»

---

## **Слайд 14 — План внедрения: quick wins → долгосрочные**

**Тезисы:**

- Сначала безобидные плюсы (мемоизация, кеши, ленивые импорты)
    
- Потом — архитектура (разделение слоёв/модулей)
    
    **Промпт:**
    
    «Составь поэтапный план улучшений на 2 недели (quick wins) и 4–6 недель (структурные). Для каждого шага — критерий успеха и метрика.»

---

### **МИКРО-ДЕМО

## **Слайд 15 — Демонстрация: «карта → паспорт → узкие места»**

**Шаги:**

1. Просим mermaid-граф зависимостей.
    
2. Делаем «паспорт» модуля tasks.
    
3. Получаем отчёт по оптимизации с приоритетами.
    
    **Notes:** используйте небольшой пример, чтобы показать весь путь.

---

### **ПРАКТИКА

## **Слайд 16 — Практическое задание**

**Задание:**

- Постройте карту зависимостей своего проекта (верхний уровень)
    
- Составьте «паспорт» одного модуля
    
- Сгенерируйте 5 пунктов отчёта по оптимизации (таблица)
    
    **Критерии:** есть mermaid, карточка модуля, таблица с приоритетами.

---

## **Слайд 17 — Подсказки промптов (шпаргалка)**

- «Суммаризируй проект (5–8 буллетов) и дай глоссарий терминов.»
    
- «Построй mermaid-граф импортов по папкам (верхний уровень).»
    
- «Сделай паспорт модуля: API, зависимости, риски, TODO.»
    
- «Найди N+1/лишние ререндеры/плохие паттерны и предложи фиксы.»
    
- «Собери отчёт “Оптимизация” таблицей (эффект/риск/приоритет).»
    
- «Дай план quick wins (2 недели) и архитектурных шагов (4–6 недель) с метриками.»

## **Слайд 18 —Итого**

- Получили **карту зависимостей на уровне фич/слоёв.
    
- Сформировали **«паспорт» ключевых модулей**: назначение, публичный API, зависимости, риски.
    
- Собрали **отчёт по оптимизации** (проблема → эффект → фикс → риск → приоритет).
    
- Освоили **форматы ответов** для управляемого результата: таблицы / mermaid / diff.
    
- Закрепили **пакетный подход**: анализ сверху вниз, точечные улучшения.