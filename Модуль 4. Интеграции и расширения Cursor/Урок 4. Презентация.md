[[Урок 4. Автоматизация разработки и snippets]]
## **Слайд 1 — Титульный

**Заголовок:** Автоматизация в Cursor: snippets, tasks, «макросы»

**Подзаголовок:** Пишем меньше руками — больше успеваем

**Notes:** «Цель: ускорить рутину — шаблоны кода, горячие заготовки, автозапуски тестов/сборок и быстрые команды.»

---

## **Слайд 2 — План и результат**

**Тезисы:**

1. Snippets: от простых до «умных» с плейсхолдерами
    
2. Генерация повторяющегося кода через AI
    
3. Tasks: тесты, сборка, компаунд-таски
    
4. (Опционально) «Макросы» через keybindings/расширение
    
    **Итог:** в проекте есть свои сниппеты, быстрые команды, горячие клавиши для тестов и дев-сервера.

---

### **БЛОК 1. SNIPPETS

## **Слайд 3 — Где живут сниппеты**

**Тезисы:**

- Пользовательские: _User Snippets_ (глобально)
    
- Проектные: ./.vscode/*.code-snippets (хранятся в Git)
    
- Активируются по **prefix** (короткое имя)
    
    **Notes:** для командной работы — храните сниппеты в репозитории.

---

## **Слайд 4 — React-компонент: «умный» сниппет**

**Тезисы:** имя компонента берём из имени файла; пропсы заготовлены.

```
{
  "React FC (file-based name)": {
    "prefix": "rfc",
    "description": "Функциональный React-компонент с Tailwind",
    "scope": "javascriptreact,typescriptreact",
    "body": [
      "import React from 'react'",
      "",
      "type ${TM_FILENAME_BASE/(.*)/${1:/pascalcase}/}Props = {",
      "  ${1:children}?: React.ReactNode",
      "}",
      "",
      "export function ${TM_FILENAME_BASE/(.*)/${1:/pascalcase}/}(props: ${TM_FILENAME_BASE/(.*)/${1:/pascalcase}/}Props) {",
      "  const { ${1:children} } = props",
      "  return (",
      "    <div className=\"p-4 rounded-xl shadow\">$1</div>",
      "  )",
      "}"
    ]
  }
}
```

**Notes:** покажите трансформацию ${TM_FILENAME_BASE → PascalCase}.

---

## **Слайд 5 — Хук + тест: сниппеты с плейсхолдерами**

```
{
  "useX hook": {
    "prefix": "hook",
    "scope": "typescriptreact,typescript",
    "body": [
      "export function use${1:Thing}() {",
      "  const [state, setState] = React.useState<$2>($3)",
      "  return { state, setState }",
      "}"
    ]
  },
  "Vitest spec": {
    "prefix": "spec",
    "scope": "typescript,javascript",
    "body": [
      "import { describe, it, expect } from 'vitest'",
      "describe('${1:unit}', () => {",
      "  it('should ${2:work}', () => {",
      "    expect(${3:1 + 1}).toBe(${4:2})",
      "  })",
      "})"
    ]
  }
}
```

**Notes:** плейсхолдеры ${1}, ${2} ускоряют навигацию по шаблону.

---

## **Слайд 6 — Приёмы: варианты и трансформации**

**Тезисы:**

- **Choices:** ${1|low,medium,high|}
    
- **Регэксп-трансформы:** ${VAR/regex/replace/flags}
    
- **TM-переменные:** TM_FILENAME_BASE, CLIPBOARD, CURRENT_YEAR
    
    **Notes:** покажите мини-пример с choice для приоритета.

---

## **Слайд 7 — Генерация сниппета через AI**

**Тезисы:** попросите AI превратить повторяющийся блок в JSON-сниппет.

**Промпт:**

«Возьми этот код и преврати его в VS Code snippet (JSON) с плейсхолдерами для заголовка, описания и обработчика. Добавь описание и короткий prefix. Ничего лишнего.»

---

## **Слайд 8 — Организация сниппетов**

**Тезисы:**

- Именование: rfc, hook, api-get, spec
    
- Группируйте по языкам/типам (react, ts, api)
    
- Док в docs/snippets.md с примерами
    
    **Notes:** один PR — один набор сниппетов.

---

### **БЛОК 2. TASKS и «МАКРОСЫ»

## **Слайд 9 — Введение в tasks.json**

**Тезисы:**

- Запускаем команды без терминала
    
- Типы: shell, process, npm
    
- Группы: build, test, none

---

## **Слайд 10 — Таск: тесты (watch)**

```
{
  "label": "test:watch",
  "type": "npm",
  "script": "test:watch",
  "group": "test",
  "problemMatcher": []
}
```

**Notes:** если есть Vitest/Jest watch — привяжите сюда.

---

## **Слайд 11 — Таск: TypeScript build/watch**

```
{
  "label": "tsc:watch",
  "type": "shell",
  "command": "tsc -w --noEmit",
  "group": "build",
  "isBackground": true,
  "problemMatcher": "$tsc-watch"
}
```

**Notes:** $tsc-watch подсветит ошибки прямо в редакторе.

---

## **Слайд 12 — Быстрые клавиши для тасков**

```
[
  { "key": "ctrl+shift+t", "command": "workbench.action.tasks.runTask", "args": "test:watch" },
  { "key": "ctrl+shift+d", "command": "workbench.action.tasks.runTask", "args": "dev:all" }
]
```

**Notes:** показываем мгновенный запуск без мыши.

---

## **Слайд 13 — (Опционально) «Макросы» из нескольких команд**


**Идея:** расширение _multi-command_ позволяет связать несколько команд в одну.

**settings.json (пример):**

```
{
  "multiCommand.commands": [
    {
      "command": "multi.dev.cleanStart",
      "sequence": [
        { "command": "workbench.action.files.saveAll" },
        { "command": "workbench.action.tasks.runTask", "args": "tsc:watch" },
        { "command": "workbench.action.tasks.runTask", "args": "dev:all" }
      ]
    }
  ]
}
```

**keybindings.json:**

```
{ "key": "ctrl+alt+r", "command": "multi.dev.cleanStart" }
```

**Notes:** отметьте, что это зависит от установленного расширения.

---

### **МИКРО-ДЕМО

## **Слайд 14 — «От пустого файла до автозапуска тестов»**

**Шаги:**

1. Добавить сниппет rfc → создать компонент.
    
2. Добавить сниппет spec → написать тест.
    
3. Запустить test:watch по горячей клавише.
    
4. Исправить тест → зелёный результат.
    
    **Notes:** акцент на экономии кликов.

---

### **ПРАКТИКА

## **Слайд 15 — Задание**

**Сделать:**

- Свой сниппет для API-функции (api.get/post) с обработкой ошибок
    
- Таск lint:fix и горячую клавишу для него
    
- Композитный dev:all (если монорепо)
    
    **Критерии:** сниппет вставляется по префиксу; таски запускаются с хоткеев.

---

## **Слайд 16 — Подсказки промптов (копируй-вставляй)**

- «Преобразуй этот блок кода в VS Code snippet (JSON) с плейсхолдерами и префиксом api-get. Только JSON.»
    
- «Сгенерируй .vscode/tasks.json: test:watch (npm), tsc:watch, композит dev:all (параллельно).»
    
- «Подготовь keybindings.json с хоткеями на test:watch и dev:all. Ничего лишнего.»
    
- «Проверь конфликты форматера/линтера при автосохранении и предложи settings.json для согласования.»

---

## **Слайд 17 — Анти-паттерны**

**Тезисы:**

- 2 форматера одновременно → «дёргания» кода
    
- Слишком длинные сниппеты вместо маленьких модулей
    
- Таски без problemMatcher → не видно ошибок в редакторе
    
- «Горячие клавиши без стандарта» → хаос в команде
    
    **Notes:** договоритесь о префиксах, хоткеях и местах хранения.

---

## **Слайд 18 — Итоги

**Тезисы:**

- Snippets → мгновенные заготовки кода
    
- Tasks/«макросы» → один хоткей = много действий